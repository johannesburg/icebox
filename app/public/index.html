<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Iceboxx</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="stylesheet" href="./stylesheets/bootstrap.css" media="screen">
    <link rel="stylesheet" href="./stylesheets/bootstrap.min.css">
	
	<script src="https://cdn.firebase.com/js/client/2.3.1/firebase.js"></script>
    <script src="populateList.js"></script>

    <!--<link rel="stylesheet" href="../assets/css/custom.min.css">
    
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="../bower_components/html5shiv/dist/html5shiv.js"></script>
      <script src="../bower_components/respond/dest/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
      <!-- Navbar
      ================================================== -->
      <div class="bs-docs-section clearfix">
        <div class="row">
          <div class="col-lg-12">
            <div class="bs-component">

            <div class="bs-component">
              <nav class="navbar navbar-inverse">
                <div class="container-fluid">
                  <div class="navbar-header">
                    <a class="navbar-brand" href="#">Iceboxx</a>
                  </div>
                    <form class="navbar-form navbar-right" role="search">
                      <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search">
                      </div>
                      <button type="submit" class="btn btn-default">Submit</button>
                    </form>
                    <ul class="nav navbar-nav navbar-right">
                    </ul>
                  </div>
                </div>
              </nav>
            </div>

          </div>
        </div>
      </div>

<script type="text/javascript">
	function fileSelected() {
		var count = document.getElementById('fileToUpload').files.length;
		document.getElementById('details').innerHTML = "";
		for (var index = 0; index < count; index ++) {
			var file = document.getElementById('fileToUpload').files[index];
			var fileSize = 0;
			if (file.size > 1024 * 1024) {
				fileSize = (Math.round(file.size * 100 / (1024 * 1024)) / 100).toString() + 'MB';
			} else {
				fileSize = (Math.round(file.size * 100 / 1024) / 100).toString() + 'KB';
			}
			document.getElementById('details').innerHTML += 'Name: ' + file.name + '<br>Size: ' + fileSize + '<br>Type: ' + file.type;
			document.getElementById('details').innerHTML += '<p>';
		}
    }
	
	function uploadFile() {
        var fd = new FormData();
		var count = document.getElementById('fileToUpload').files.length;
		for (var index = 0; index < count; index ++) {
			var file = document.getElementById('fileToUpload').files[index];
			fd.append('myFile', file);
		}
 
        var xhr = new XMLHttpRequest();
		xhr.upload.addEventListener("progress", uploadProgress, false);
		xhr.addEventListener("load", uploadComplete, false);
		xhr.addEventListener("error", uploadFailed, false);
		xhr.addEventListener("abort", uploadCanceled, false);
		xhr.open("POST", "savetofile.php");
		xhr.send(fd);
	}
	
	function uploadProgress(evt) {
		if (evt.lengthComputable) {
			var percentComplete = Math.round(evt.loaded * 100 / evt.total);
			document.getElementById('progress').innerHTML = percentComplete.toString() + '%';
        } else {
			document.getElementById('progress').innerHTML = 'unable to compute';
        }
	}
	
	function uploadComplete(evt) {
        alert(evt.target.responseText);
	}
 
 	function uploadFailed(evt) {
		alert("There was an error attempting to upload the file.");
	}
	
	function uploadCanceled(evt) {
		alert("The upload has been canceled by the user or the browser dropped the connection.");
	}
</script>
  
  <div class="form-group">
  	<div class="col-lg-10 col-lg-offset-2">
  		<form id="form1" enctype="multipart/form-data" method="post" action="Upload.aspx">
    	<div>
    	  <label for="fileToUpload">Take or select photo(s)</label><br />
          <input type="file" name="fileToUpload" id="fileToUpload" onchange="fileSelected();" accept="image/*" capture="camera" />
    	</div>
        
    	<div id="details"></div>
    	<div>
      		<input type="button" class="btn btn-primary" onclick="uploadFile()" value="Upload" />
    	</div>
 
    	<div id="progress"></div>
        </form>
    </div>
 </div>
  
  
  <form class="bs-component">
                <div class="form-group">
                  <label class="control-label" for="itemInput">Focused input</label>
                  <input class="form-control" id="itemInput" type="text" value="Input">
                </div>
   </form>
  
	<!-- Table -->

	<div class="row">
    	<div class="col-lg-12">
        	<div class="page-header">
            	<h1 id="tables">Tables</h1>
            </div>
            <div id="itemTable">

            </div>
          </div>
      </div>
    </div>

          </div>
        </div>
      </div>
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <!--<script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="../assets/js/custom.js"></script>-->
  </body>
</html>
